#!/usr/bin/env node -harmony 
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(process){var fs=require("fs");var _=require("underscore");var Mustache=require("mustache");require("harmony-reflect");new Proxy({},{});var die=function(msg){console.error(msg);process.exit(1)};var profileName=process.argv&&process.argv.length>=3&&process.argv[2]||die("Please specify a profile.");var controlFilename="conflagrate.json";var control;try{control=JSON.parse(fs.readFileSync(controlFilename))}catch(err){die("Unable to read control file '"+controlFilename+"'.")}var controlProfiles=control.profiles||{};var profile=controlProfiles[profileName]||die("Profile '"+profileName+"' not defined.");var model={};profile.forEach(function(configFilename){_(model).extend(JSON.parse(fs.readFileSync(configFilename)))});model=new Proxy(model,{get:function(target,property){if(!(property in target)){throw new Error("Property '"+property+"' not found.")}return target[property]}});var controlTemplates=control.templates||{};for(var templateFilename in controlTemplates){if(controlTemplates.hasOwnProperty(templateFilename)&&controlTemplates[templateFilename]){var outputFilename=templateFilename;var matchTemplateIsDefaultsFile=/^(.*[^/]+)[^/:alnum:]default$/.exec(templateFilename);if(matchTemplateIsDefaultsFile){outputFilename=matchTemplateIsDefaultsFile[1]}var template=String(fs.readFileSync(templateFilename));var output=Mustache.render(String(template),model);fs.writeFileSync(outputFilename,output)}}}).call(this,require("_process"))},{_process:3,fs:2,"harmony-reflect":4,mustache:5,underscore:6}],2:[function(require,module,exports){},{}],3:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;(function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}})();var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=cachedSetTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;cachedClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){cachedSetTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],4:[function(require,module,exports){(function(global){(function(global){"use strict";if(typeof WeakMap==="undefined"){global.WeakMap=function(){};global.WeakMap.prototype={get:function(k){return undefined},set:function(k,v){throw new Error("WeakMap not supported")}}}function isStandardAttribute(name){return/^(get|set|value|writable|enumerable|configurable)$/.test(name)}function toPropertyDescriptor(obj){if(Object(obj)!==obj){throw new TypeError("property descriptor should be an Object, given: "+obj)}var desc={};if("enumerable"in obj){desc.enumerable=!!obj.enumerable}if("configurable"in obj){desc.configurable=!!obj.configurable}if("value"in obj){desc.value=obj.value}if("writable"in obj){desc.writable=!!obj.writable}if("get"in obj){var getter=obj.get;if(getter!==undefined&&typeof getter!=="function"){throw new TypeError("property descriptor 'get' attribute must be "+"callable or undefined, given: "+getter)}desc.get=getter}if("set"in obj){var setter=obj.set;if(setter!==undefined&&typeof setter!=="function"){throw new TypeError("property descriptor 'set' attribute must be "+"callable or undefined, given: "+setter)}desc.set=setter}if("get"in desc||"set"in desc){if("value"in desc||"writable"in desc){throw new TypeError("property descriptor cannot be both a data and an "+"accessor descriptor: "+obj)}}return desc}function isAccessorDescriptor(desc){if(desc===undefined)return false;return"get"in desc||"set"in desc}function isDataDescriptor(desc){if(desc===undefined)return false;return"value"in desc||"writable"in desc}function isGenericDescriptor(desc){if(desc===undefined)return false;return!isAccessorDescriptor(desc)&&!isDataDescriptor(desc)}function toCompletePropertyDescriptor(desc){var internalDesc=toPropertyDescriptor(desc);if(isGenericDescriptor(internalDesc)||isDataDescriptor(internalDesc)){if(!("value"in internalDesc)){internalDesc.value=undefined}if(!("writable"in internalDesc)){internalDesc.writable=false}}else{if(!("get"in internalDesc)){internalDesc.get=undefined}if(!("set"in internalDesc)){internalDesc.set=undefined}}if(!("enumerable"in internalDesc)){internalDesc.enumerable=false}if(!("configurable"in internalDesc)){internalDesc.configurable=false}return internalDesc}function isEmptyDescriptor(desc){return!("get"in desc)&&!("set"in desc)&&!("value"in desc)&&!("writable"in desc)&&!("enumerable"in desc)&&!("configurable"in desc)}function isEquivalentDescriptor(desc1,desc2){return sameValue(desc1.get,desc2.get)&&sameValue(desc1.set,desc2.set)&&sameValue(desc1.value,desc2.value)&&sameValue(desc1.writable,desc2.writable)&&sameValue(desc1.enumerable,desc2.enumerable)&&sameValue(desc1.configurable,desc2.configurable)}function sameValue(x,y){if(x===y){return x!==0||1/x===1/y}return x!==x&&y!==y}function normalizeAndCompletePropertyDescriptor(attributes){if(attributes===undefined){return undefined}var desc=toCompletePropertyDescriptor(attributes);for(var name in attributes){if(!isStandardAttribute(name)){Object.defineProperty(desc,name,{value:attributes[name],writable:true,enumerable:true,configurable:true})}}return desc}function normalizePropertyDescriptor(attributes){var desc=toPropertyDescriptor(attributes);for(var name in attributes){if(!isStandardAttribute(name)){Object.defineProperty(desc,name,{value:attributes[name],writable:true,enumerable:true,configurable:true})}}return desc}var prim_preventExtensions=Object.preventExtensions,prim_seal=Object.seal,prim_freeze=Object.freeze,prim_isExtensible=Object.isExtensible,prim_isSealed=Object.isSealed,prim_isFrozen=Object.isFrozen,prim_getPrototypeOf=Object.getPrototypeOf,prim_getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,prim_defineProperty=Object.defineProperty,prim_keys=Object.keys,prim_isArray=Array.isArray,prim_concat=Array.prototype.concat,prim_isPrototypeOf=Object.prototype.isPrototypeOf,prim_hasOwnProperty=Object.prototype.hasOwnProperty;var Object_isFrozen,Object_isSealed,Object_isExtensible,Object_getPrototypeOf;function isFixed(name,target){return{}.hasOwnProperty.call(target,name)}function isSealed(name,target){var desc=Object.getOwnPropertyDescriptor(target,name);if(desc===undefined){return false}return desc.configurable===false}function isSealedDesc(desc){return desc!==undefined&&desc.configurable===false}function isCompatibleDescriptor(extensible,current,desc){if(current===undefined&&extensible===false){return false}if(current===undefined&&extensible===true){return true}if(isEmptyDescriptor(desc)){return true}if(isEquivalentDescriptor(current,desc)){return true}if(current.configurable===false){if(desc.configurable===true){return false}if("enumerable"in desc&&desc.enumerable!==current.enumerable){return false}}if(isGenericDescriptor(desc)){return true}if(isDataDescriptor(current)!==isDataDescriptor(desc)){if(current.configurable===false){return false}return true}if(isDataDescriptor(current)&&isDataDescriptor(desc)){if(current.configurable===false){if(current.writable===false&&desc.writable===true){return false}if(current.writable===false){if("value"in desc&&!sameValue(desc.value,current.value)){return false}}}return true}if(isAccessorDescriptor(current)&&isAccessorDescriptor(desc)){if(current.configurable===false){if("set"in desc&&!sameValue(desc.set,current.set)){return false}if("get"in desc&&!sameValue(desc.get,current.get)){return false}}}return true}function setIntegrityLevel(target,level){var ownProps=Object.getOwnPropertyNames(target);var pendingException=undefined;if(level==="sealed"){var l=+ownProps.length;var k;for(var i=0;i<l;i++){k=String(ownProps[i]);try{Object.defineProperty(target,k,{configurable:false})}catch(e){if(pendingException===undefined){pendingException=e}}}}else{var l=+ownProps.length;var k;for(var i=0;i<l;i++){k=String(ownProps[i]);try{var currentDesc=Object.getOwnPropertyDescriptor(target,k);if(currentDesc!==undefined){var desc;if(isAccessorDescriptor(currentDesc)){desc={configurable:false}}else{desc={configurable:false,writable:false}}Object.defineProperty(target,k,desc)}}catch(e){if(pendingException===undefined){pendingException=e}}}}return Reflect.preventExtensions(target)}function testIntegrityLevel(target,level){var isExtensible=Object_isExtensible(target);if(isExtensible)return false;var ownProps=Object.getOwnPropertyNames(target);var pendingException=undefined;var configurable=false;var writable=false;var l=+ownProps.length;var k;var currentDesc;for(var i=0;i<l;i++){k=String(ownProps[i]);try{currentDesc=Object.getOwnPropertyDescriptor(target,k);configurable=configurable||currentDesc.configurable;if(isDataDescriptor(currentDesc)){writable=writable||currentDesc.writable}}catch(e){if(pendingException===undefined){pendingException=e;configurable=true}}}if(pendingException!==undefined){throw pendingException}if(level==="frozen"&&writable===true){return false}if(configurable===true){return false}return true}function Validator(target,handler){this.target=target;this.handler=handler}Validator.prototype={getTrap:function(trapName){var trap=this.handler[trapName];if(trap===undefined){return undefined}if(typeof trap!=="function"){throw new TypeError(trapName+" trap is not callable: "+trap)}return trap},getOwnPropertyDescriptor:function(name){"use strict";var trap=this.getTrap("getOwnPropertyDescriptor");if(trap===undefined){return Reflect.getOwnPropertyDescriptor(this.target,name)}name=String(name);var desc=trap.call(this.handler,this.target,name);desc=normalizeAndCompletePropertyDescriptor(desc);var targetDesc=Object.getOwnPropertyDescriptor(this.target,name);var extensible=Object.isExtensible(this.target);if(desc===undefined){if(isSealedDesc(targetDesc)){throw new TypeError("cannot report non-configurable property '"+name+"' as non-existent")}if(!extensible&&targetDesc!==undefined){throw new TypeError("cannot report existing own property '"+name+"' as non-existent on a non-extensible object")}return undefined}if(!extensible){if(targetDesc===undefined){throw new TypeError("cannot report a new own property '"+name+"' on a non-extensible object")}}if(name!==undefined){if(!isCompatibleDescriptor(extensible,targetDesc,desc)){throw new TypeError("cannot report incompatible property descriptor "+"for property '"+name+"'")}}if(desc.configurable===false&&!isSealedDesc(targetDesc)){throw new TypeError("cannot report a non-configurable descriptor "+"for configurable or non-existent property '"+name+"'")}return desc},getPropertyDescriptor:function(name){var handler=this;if(!handler.has(name))return undefined;return{get:function(){return handler.get(this,name)},set:function(val){if(handler.set(this,name,val)){return val}else{throw new TypeError("failed assignment to "+name)}},enumerable:true,configurable:true}},defineProperty:function(name,desc){var trap=this.getTrap("defineProperty");if(trap===undefined){return Reflect.defineProperty(this.target,name,desc)}name=String(name);desc=normalizePropertyDescriptor(desc);var success=trap.call(this.handler,this.target,name,desc);success=!!success;if(success===true){var targetDesc=Object.getOwnPropertyDescriptor(this.target,name);var extensible=Object.isExtensible(this.target);if(!extensible){if(targetDesc===undefined){throw new TypeError("cannot successfully add a new property '"+name+"' to a non-extensible object")}}if(targetDesc!==undefined){if(!isCompatibleDescriptor(extensible,targetDesc,desc)){throw new TypeError("cannot define incompatible property "+"descriptor for property '"+name+"'")}}if(desc.configurable===false&&!isSealedDesc(targetDesc)){throw new TypeError("cannot successfully define a non-configurable "+"descriptor for configurable or non-existent property '"+name+"'")}}return success},preventExtensions:function(){var trap=this.getTrap("preventExtensions");if(trap===undefined){return Reflect.preventExtensions(this.target)}var success=trap.call(this.handler,this.target);success=!!success;if(success){if(Object_isExtensible(this.target)){throw new TypeError("can't report extensible object as non-extensible: "+this.target)}}return success},delete:function(name){"use strict";var trap=this.getTrap("deleteProperty");if(trap===undefined){return Reflect.deleteProperty(this.target,name)}name=String(name);var res=trap.call(this.handler,this.target,name);res=!!res;if(res===true){if(isSealed(name,this.target)){throw new TypeError("property '"+name+"' is non-configurable "+"and can't be deleted")}}return res},getOwnPropertyNames:function(){var trap=this.getTrap("getOwnPropertyNames");if(trap===undefined){return Reflect.getOwnPropertyNames(this.target)}var trapResult=trap.call(this.handler,this.target);var propNames=Object.create(null);var numProps=+trapResult.length;var result=new Array(numProps);for(var i=0;i<numProps;i++){var s=String(trapResult[i]);if(propNames[s]){throw new TypeError("getOwnPropertyNames cannot list a "+"duplicate property '"+s+"'")}if(!Object.isExtensible(this.target)&&!isFixed(s,this.target)){throw new TypeError("getOwnPropertyNames cannot list a new "+"property '"+s+"' on a non-extensible object")}propNames[s]=true;result[i]=s}var ownProps=Object.getOwnPropertyNames(this.target);var target=this.target;ownProps.forEach(function(ownProp){if(!propNames[ownProp]){if(isSealed(ownProp,target)){throw new TypeError("getOwnPropertyNames trap failed to include "+"non-configurable property '"+ownProp+"'")}if(!Object.isExtensible(target)&&isFixed(ownProp,target)){throw new TypeError("cannot report existing own property '"+ownProp+"' as non-existent on a non-extensible object")}}});return result},isExtensible:function(){var trap=this.getTrap("isExtensible");if(trap===undefined){return Reflect.isExtensible(this.target)}var result=trap.call(this.handler,this.target);result=!!result;var state=Object_isExtensible(this.target);if(result!==state){if(result){throw new TypeError("cannot report non-extensible object as extensible: "+this.target)}else{throw new TypeError("cannot report extensible object as non-extensible: "+this.target)}}return state},getPrototypeOf:function(){var trap=this.getTrap("getPrototypeOf");if(trap===undefined){return Reflect.getPrototypeOf(this.target)}var allegedProto=trap.call(this.handler,this.target);if(!Object_isExtensible(this.target)){var actualProto=Object_getPrototypeOf(this.target);if(!sameValue(allegedProto,actualProto)){throw new TypeError("prototype value does not match: "+this.target)}}return allegedProto},setPrototypeOf:function(newProto){var trap=this.getTrap("setPrototypeOf");if(trap===undefined){return Reflect.setPrototypeOf(this.target,newProto)}var success=trap.call(this.handler,this.target,newProto);success=!!success;if(success&&!Object_isExtensible(this.target)){var actualProto=Object_getPrototypeOf(this.target);if(!sameValue(newProto,actualProto)){throw new TypeError("prototype value does not match: "+this.target)}}return success},getPropertyNames:function(){throw new TypeError("getPropertyNames trap is deprecated")},has:function(name){var trap=this.getTrap("has");if(trap===undefined){return Reflect.has(this.target,name)}name=String(name);var res=trap.call(this.handler,this.target,name);res=!!res;if(res===false){if(isSealed(name,this.target)){throw new TypeError("cannot report existing non-configurable own "+"property '"+name+"' as a non-existent "+"property")}if(!Object.isExtensible(this.target)&&isFixed(name,this.target)){throw new TypeError("cannot report existing own property '"+name+"' as non-existent on a non-extensible object")}}return res},get:function(receiver,name){var trap=this.getTrap("get");if(trap===undefined){return Reflect.get(this.target,name,receiver)}name=String(name);var res=trap.call(this.handler,this.target,name,receiver);var fixedDesc=Object.getOwnPropertyDescriptor(this.target,name);if(fixedDesc!==undefined){if(isDataDescriptor(fixedDesc)&&fixedDesc.configurable===false&&fixedDesc.writable===false){if(!sameValue(res,fixedDesc.value)){throw new TypeError("cannot report inconsistent value for "+"non-writable, non-configurable property '"+name+"'")}}else{if(isAccessorDescriptor(fixedDesc)&&fixedDesc.configurable===false&&fixedDesc.get===undefined){if(res!==undefined){throw new TypeError("must report undefined for non-configurable "+"accessor property '"+name+"' without getter")}}}}return res},set:function(receiver,name,val){var trap=this.getTrap("set");if(trap===undefined){return Reflect.set(this.target,name,val,receiver)}name=String(name);var res=trap.call(this.handler,this.target,name,val,receiver);res=!!res;if(res===true){var fixedDesc=Object.getOwnPropertyDescriptor(this.target,name);if(fixedDesc!==undefined){if(isDataDescriptor(fixedDesc)&&fixedDesc.configurable===false&&fixedDesc.writable===false){if(!sameValue(val,fixedDesc.value)){throw new TypeError("cannot successfully assign to a "+"non-writable, non-configurable property '"+name+"'")}}else{if(isAccessorDescriptor(fixedDesc)&&fixedDesc.configurable===false&&fixedDesc.set===undefined){throw new TypeError("setting a property '"+name+"' that has "+" only a getter")}}}}return res},enumerate:function(){var trap=this.getTrap("enumerate");if(trap===undefined){var trapResult=Reflect.enumerate(this.target);var result=[];var nxt=trapResult.next();while(!nxt.done){result.push(String(nxt.value));nxt=trapResult.next()}return result}var trapResult=trap.call(this.handler,this.target);if(trapResult===null||trapResult===undefined||trapResult.next===undefined){throw new TypeError("enumerate trap should return an iterator, got: "+trapResult)}var propNames=Object.create(null);var result=[];var nxt=trapResult.next();while(!nxt.done){var s=String(nxt.value);if(propNames[s]){throw new TypeError("enumerate trap cannot list a "+"duplicate property '"+s+"'")}propNames[s]=true;result.push(s);nxt=trapResult.next()}var ownEnumerableProps=Object.keys(this.target);var target=this.target;ownEnumerableProps.forEach(function(ownEnumerableProp){if(!propNames[ownEnumerableProp]){if(isSealed(ownEnumerableProp,target)){throw new TypeError("enumerate trap failed to include "+"non-configurable enumerable property '"+ownEnumerableProp+"'")}if(!Object.isExtensible(target)&&isFixed(ownEnumerableProp,target)){throw new TypeError("cannot report existing own property '"+ownEnumerableProp+"' as non-existent on a "+"non-extensible object")}}});return result},iterate:Validator.prototype.enumerate,ownKeys:function(){var trap=this.getTrap("ownKeys");if(trap===undefined){return Reflect.ownKeys(this.target)}var trapResult=trap.call(this.handler,this.target);if(trapResult===null||trapResult===undefined||typeof trapResult!=="object"){throw new TypeError("ownKeys should return an iterator object, got "+trapResult)}return trapResult},apply:function(target,thisBinding,args){var trap=this.getTrap("apply");if(trap===undefined){return Reflect.apply(target,thisBinding,args)}if(typeof this.target==="function"){return trap.call(this.handler,target,thisBinding,args)}else{throw new TypeError("apply: "+target+" is not a function")}},construct:function(target,args){var trap=this.getTrap("construct");if(trap===undefined){return Reflect.construct(target,args)}if(typeof this.target==="function"){return trap.call(this.handler,target,args)}else{throw new TypeError("new: "+target+" is not a function")}}};var directProxies=new WeakMap;Object.preventExtensions=function(subject){var vhandler=directProxies.get(subject);if(vhandler!==undefined){if(vhandler.preventExtensions()){return subject}else{throw new TypeError("preventExtensions on "+subject+" rejected")}}else{return prim_preventExtensions(subject)}};Object.seal=function(subject){return setIntegrityLevel(subject,"sealed")};Object.freeze=function(subject){return setIntegrityLevel(subject,"frozen")};Object.isExtensible=Object_isExtensible=function(subject){var vHandler=directProxies.get(subject);if(vHandler!==undefined){return vHandler.isExtensible()}else{return prim_isExtensible(subject)}};Object.isSealed=Object_isSealed=function(subject){return testIntegrityLevel(subject,"sealed")};Object.isFrozen=Object_isFrozen=function(subject){return testIntegrityLevel(subject,"frozen")};Object.getPrototypeOf=Object_getPrototypeOf=function(subject){var vHandler=directProxies.get(subject);if(vHandler!==undefined){return vHandler.getPrototypeOf()}else{return prim_getPrototypeOf(subject)}};Object.getOwnPropertyDescriptor=function(subject,name){var vhandler=directProxies.get(subject);if(vhandler!==undefined){return vhandler.getOwnPropertyDescriptor(name)}else{return prim_getOwnPropertyDescriptor(subject,name)}};Object.defineProperty=function(subject,name,desc){var vhandler=directProxies.get(subject);if(vhandler!==undefined){var normalizedDesc=normalizePropertyDescriptor(desc);var success=vhandler.defineProperty(name,normalizedDesc);if(success===false){throw new TypeError("can't redefine property '"+name+"'")}return success}else{return prim_defineProperty(subject,name,desc)}};Object.keys=function(subject){var vHandler=directProxies.get(subject);if(vHandler!==undefined){var ownKeysIterator=vHandler.ownKeys();var nxt=ownKeysIterator.next();var result=[];while(!nxt.done){var k=String(nxt.value);var desc=Object.getOwnPropertyDescriptor(subject,k);if(desc!==undefined&&desc.enumerable===true){result.push(k)}nxt=ownKeysIterator.next()}return result}else{return prim_keys(subject)}};function isObject(arg){var type=typeof arg;return type==="object"&&arg!==null||type==="function"}function safeWeakMapGet(map,key){return isObject(key)?map.get(key):undefined}function makeUnwrapping0ArgMethod(primitive){return function builtin(){var vHandler=safeWeakMapGet(directProxies,this);if(vHandler!==undefined){return builtin.call(vHandler.target)}else{return primitive.call(this)}}}function makeUnwrapping1ArgMethod(primitive){return function builtin(arg){var vHandler=safeWeakMapGet(directProxies,this);if(vHandler!==undefined){return builtin.call(vHandler.target,arg)}else{return primitive.call(this,arg)}}}Object.prototype.valueOf=makeUnwrapping0ArgMethod(Object.prototype.valueOf);Object.prototype.toString=makeUnwrapping0ArgMethod(Object.prototype.toString);Function.prototype.toString=makeUnwrapping0ArgMethod(Function.prototype.toString);Date.prototype.toString=makeUnwrapping0ArgMethod(Date.prototype.toString);Object.prototype.isPrototypeOf=function builtin(arg){while(true){var vHandler2=safeWeakMapGet(directProxies,arg);if(vHandler2!==undefined){arg=vHandler2.getPrototypeOf();if(arg===null){return false}else if(sameValue(arg,this)){return true}}else{return prim_isPrototypeOf.call(this,arg)}}};Array.isArray=function(subject){var vHandler=safeWeakMapGet(directProxies,subject);if(vHandler!==undefined){return Array.isArray(vHandler.target)}else{return prim_isArray(subject)}};function isProxyArray(arg){var vHandler=safeWeakMapGet(directProxies,arg);if(vHandler!==undefined){return Array.isArray(vHandler.target)}return false}Array.prototype.concat=function(){var length;for(var i=0;i<arguments.length;i++){if(isProxyArray(arguments[i])){length=arguments[i].length;arguments[i]=Array.prototype.slice.call(arguments[i],0,length)}}return prim_concat.apply(this,arguments)};var prim_setPrototypeOf=Object.setPrototypeOf;var __proto__setter=function(){var protoDesc=prim_getOwnPropertyDescriptor(Object.prototype,"__proto__");if(protoDesc===undefined||typeof protoDesc.set!=="function"){return function(){throw new TypeError("setPrototypeOf not supported on this platform")}}try{protoDesc.set.call({},{})}catch(e){return function(){throw new TypeError("setPrototypeOf not supported on this platform")}}prim_defineProperty(Object.prototype,"__proto__",{set:function(newProto){return Object.setPrototypeOf(this,newProto)}});return protoDesc.set}();Object.setPrototypeOf=function(target,newProto){var handler=directProxies.get(target);if(handler!==undefined){if(handler.setPrototypeOf(newProto)){return target}else{throw new TypeError("proxy rejected prototype mutation")}}else{if(!Object_isExtensible(target)){throw new TypeError("can't set prototype on non-extensible object: "+target)}if(prim_setPrototypeOf)return prim_setPrototypeOf(target,newProto);if(Object(newProto)!==newProto||newProto===null){throw new TypeError("Object prototype may only be an Object or null: "+newProto)}__proto__setter.call(target,newProto);return target}};Object.prototype.hasOwnProperty=function(name){var handler=safeWeakMapGet(directProxies,this);if(handler!==undefined){var desc=handler.getOwnPropertyDescriptor(name);return desc!==undefined}else{return prim_hasOwnProperty.call(this,name)}};var Reflect=global.Reflect={getOwnPropertyDescriptor:function(target,name){return Object.getOwnPropertyDescriptor(target,name)},getOwnPropertyNames:function(target){return Object.getOwnPropertyNames(target)},defineProperty:function(target,name,desc){var handler=directProxies.get(target);if(handler!==undefined){return handler.defineProperty(target,name,desc)}var current=Object.getOwnPropertyDescriptor(target,name);var extensible=Object.isExtensible(target);if(current===undefined&&extensible===false){return false}if(current===undefined&&extensible===true){Object.defineProperty(target,name,desc);return true}if(isEmptyDescriptor(desc)){return true}if(isEquivalentDescriptor(current,desc)){return true}if(current.configurable===false){if(desc.configurable===true){return false}if("enumerable"in desc&&desc.enumerable!==current.enumerable){return false}}if(isGenericDescriptor(desc)){}else if(isDataDescriptor(current)!==isDataDescriptor(desc)){if(current.configurable===false){return false}}else if(isDataDescriptor(current)&&isDataDescriptor(desc)){if(current.configurable===false){if(current.writable===false&&desc.writable===true){return false}if(current.writable===false){if("value"in desc&&!sameValue(desc.value,current.value)){return false}}}}else if(isAccessorDescriptor(current)&&isAccessorDescriptor(desc)){if(current.configurable===false){if("set"in desc&&!sameValue(desc.set,current.set)){return false}if("get"in desc&&!sameValue(desc.get,current.get)){return false}}}Object.defineProperty(target,name,desc);return true},deleteProperty:function(target,name){var handler=directProxies.get(target);if(handler!==undefined){return handler.deleteProperty(target,name)}var desc=Object.getOwnPropertyDescriptor(target,name);if(desc===undefined){return true}if(desc.configurable===true){delete target[name];return true}return false},getPrototypeOf:function(target){return Object.getPrototypeOf(target)},setPrototypeOf:function(target,newProto){var handler=directProxies.get(target);if(handler!==undefined){return handler.setPrototypeOf(newProto)}if(Object(newProto)!==newProto||newProto===null){throw new TypeError("Object prototype may only be an Object or null: "+newProto)}if(!Object_isExtensible(target)){return false}var current=Object.getPrototypeOf(target);if(sameValue(current,newProto)){return true}if(prim_setPrototypeOf){try{prim_setPrototypeOf(target,newProto);return true}catch(e){return false}}__proto__setter.call(target,newProto);return true},preventExtensions:function(target){var handler=directProxies.get(target);if(handler!==undefined){return handler.preventExtensions()}prim_preventExtensions(target);return true},isExtensible:function(target){return Object.isExtensible(target)},has:function(target,name){return name in target},get:function(target,name,receiver){receiver=receiver||target;var handler=directProxies.get(target);if(handler!==undefined){return handler.get(receiver,name)}var desc=Object.getOwnPropertyDescriptor(target,name);if(desc===undefined){var proto=Object.getPrototypeOf(target);if(proto===null){return undefined}return Reflect.get(proto,name,receiver)}if(isDataDescriptor(desc)){return desc.value}var getter=desc.get;if(getter===undefined){return undefined}return desc.get.call(receiver)},set:function(target,name,value,receiver){receiver=receiver||target;var handler=directProxies.get(target);if(handler!==undefined){return handler.set(receiver,name,value)}var ownDesc=Object.getOwnPropertyDescriptor(target,name);if(ownDesc===undefined){var proto=Object.getPrototypeOf(target);if(proto!==null){return Reflect.set(proto,name,value,receiver)}ownDesc={value:undefined,writable:true,enumerable:true,configurable:true}}if(isAccessorDescriptor(ownDesc)){var setter=ownDesc.set;if(setter===undefined)return false;setter.call(receiver,value);return true}if(ownDesc.writable===false)return false;var existingDesc=Object.getOwnPropertyDescriptor(receiver,name);if(existingDesc!==undefined){var updateDesc={value:value,writable:existingDesc.writable,enumerable:existingDesc.enumerable,configurable:existingDesc.configurable};Object.defineProperty(receiver,name,updateDesc);return true}else{if(!Object.isExtensible(receiver))return false;var newDesc={value:value,writable:true,enumerable:true,configurable:true};Object.defineProperty(receiver,name,newDesc);return true}},enumerate:function(target){var handler=directProxies.get(target);if(handler!==undefined){return handler.enumerate(handler.target)}var result=[];for(var name in target){result.push(name)}var l=+result.length;var idx=0;return{next:function(){if(idx===l)return{done:true};return{done:false,value:result[idx++]}}}},ownKeys:function(target){var handler=directProxies.get(target);if(handler!==undefined){return handler.ownKeys()}var result=Reflect.getOwnPropertyNames(target);var l=+result.length;var idx=0;return{next:function(){if(idx===l){return{done:true}}return{done:false,value:result[idx++]}}}},apply:function(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)},construct:function(target,args){var handler=directProxies.get(target);if(handler!==undefined){return handler.construct(handler.target,args)}var proto=target.prototype;var instance=Object(proto)===proto?Object.create(proto):{};var result=Function.prototype.apply.call(target,instance,args);return Object(result)===result?result:instance}};if(typeof Proxy!=="undefined"){var primCreate=Proxy.create,primCreateFunction=Proxy.createFunction;var revokedHandler=primCreate({get:function(){throw new TypeError("proxy is revoked")}});global.Proxy=function(target,handler){if(Object(target)!==target){throw new TypeError("Proxy target must be an Object, given "+target)}if(Object(handler)!==handler){throw new TypeError("Proxy handler must be an Object, given "+handler)}var vHandler=new Validator(target,handler);
var proxy;if(typeof target==="function"){proxy=primCreateFunction(vHandler,function(){var args=Array.prototype.slice.call(arguments);return vHandler.apply(target,this,args)},function(){var args=Array.prototype.slice.call(arguments);return vHandler.construct(target,args)})}else{proxy=primCreate(vHandler,Object.getPrototypeOf(target))}directProxies.set(proxy,vHandler);return proxy};global.Proxy.revocable=function(target,handler){var proxy=new Proxy(target,handler);var revoke=function(){var vHandler=directProxies.get(proxy);if(vHandler!==null){vHandler.target=null;vHandler.handler=revokedHandler}return undefined};return{proxy:proxy,revoke:revoke}}}else{global.Proxy=function(_target,_handler){throw new Error("proxies not supported on this platform")}}if(typeof exports!=="undefined"){Object.keys(Reflect).forEach(function(key){exports[key]=Reflect[key]})}})(typeof exports!=="undefined"?global:this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(require,module,exports){(function(root,factory){if(typeof exports==="object"&&exports){factory(exports)}else{var mustache={};factory(mustache);if(typeof define==="function"&&define.amd){define(mustache)}else{root.Mustache=mustache}}})(this,function(mustache){var RegExp_test=RegExp.prototype.test;function testRegExp(re,string){return RegExp_test.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var Object_toString=Object.prototype.toString;var isArray=Array.isArray||function(object){return Object_toString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s]})}function escapeTags(tags){if(!isArray(tags)||tags.length!==2){throw new Error("Invalid tags: "+tags)}return[new RegExp(escapeRegExp(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRegExp(tags[1]))]}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){tags=tags||mustache.tags;template=template||"";if(typeof tags==="string"){tags=tags.split(spaceRe)}var tagRes=escapeTags(tags);var scanner=new Scanner(template);var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length){delete tokens[spaces.pop()]}}else{spaces=[]}hasTag=false;nonSpace=false}var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(tagRes[0]);if(value){for(var i=0,len=value.length;i<len;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n"){stripSpace()}}}if(!scanner.scan(tagRes[0]))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(tagRes[1])}else if(type==="{"){value=scanner.scanUntil(new RegExp("\\s*"+escapeRegExp("}"+tags[1])));scanner.scan(curlyRe);scanner.scanUntil(tagRes[1]);type="&"}else{value=scanner.scanUntil(tagRes[1])}if(!scanner.scan(tagRes[1])){throw new Error("Unclosed tag at "+scanner.pos)}token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection){throw new Error('Unopened section "'+value+'" at '+start)}if(openSection[1]!==value){throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){tagRes=escapeTags(tags=value.split(spaceRe))}}openSection=sections.pop();if(openSection){throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos)}return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function(){return this.tail===""};Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(match&&match.index===0){var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string}return""};Scanner.prototype.scanUntil=function(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view==null?{}:view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function(view){return new Context(view,this)};Context.prototype.lookup=function(name){var value;if(name in this.cache){value=this.cache[name]}else{var context=this;while(context){if(name.indexOf(".")>0){value=context.view;var names=name.split("."),i=0;while(value!=null&&i<names.length){value=value[names[i++]]}}else{value=context.view[name]}if(value!=null)break;context=context.parent}this.cache[name]=value}if(isFunction(value)){value=value.call(this.view)}return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function(){this.cache={}};Writer.prototype.parse=function(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null){tokens=cache[template]=parseTemplate(template,tags)}return tokens};Writer.prototype.render=function(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function(tokens,context,partials,originalTemplate){var buffer="";var self=this;function subRender(template){return self.render(template,context,partials)}var token,value;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];switch(token[0]){case"#":value=context.lookup(token[1]);if(!value)continue;if(isArray(value)){for(var j=0,jlen=value.length;j<jlen;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string"){throw new Error("Cannot use higher-order sections without the original template")}value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}break;case"^":value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0){buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}break;case">":if(!partials)continue;value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)buffer+=this.renderTokens(this.parse(value),context,partials,value);break;case"&":value=context.lookup(token[1]);if(value!=null)buffer+=value;break;case"name":value=context.lookup(token[1]);if(value!=null)buffer+=mustache.escape(value);break;case"text":buffer+=token[1];break}}return buffer};mustache.name="mustache.js";mustache.version="0.8.1";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function(){return defaultWriter.clearCache()};mustache.parse=function(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function(template,view,partials){return defaultWriter.render(template,view,partials)};mustache.to_html=function(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer})},{}],6:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.6.0";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return obj;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return}}return obj};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,predicate,context){var result;any(obj,function(value,index,list){if(predicate.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(predicate,context);each(obj,function(value,index,list){if(predicate.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list)},context)};_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(predicate,context);each(obj,function(value,index,list){if(!(result=result&&predicate.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(predicate,context);each(obj,function(value,index,list){if(result||(result=predicate.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs))};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}var result=-Infinity,lastComputed=-Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed>lastComputed){result=value;lastComputed=computed}});return result};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}var result=Infinity,lastComputed=Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed<lastComputed){result=value;lastComputed=computed}});return result};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){if(value==null)return _.identity;if(_.isFunction(value))return value;return _.property(value)};_.sortBy=function(obj,iterator,context){iterator=lookupIterator(iterator);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iterator,context){var result={};iterator=lookupIterator(iterator);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result}};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value]});_.indexBy=group(function(result,key,value){result[key]=value});_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1});_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];if(n<0)return[];return slice.call(array,0,n)};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.partition=function(array,predicate){var pass=[],fail=[];each(array,function(elem){(predicate(elem)?pass:fail).push(elem)});return[pass,fail]};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item)})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,length+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var length=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(length);while(idx<length){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++]}while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args)}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait)}if(callNow){result=func.apply(context,args);context=args=null}return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=new Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=new Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.property=function(key){return function(obj){return obj[key]}};_.matches=function(attrs){return function(obj){if(obj===attrs)return true;for(var key in attrs){if(attrs[key]!==obj[key])return false}return true}};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}});if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}]},{},[1]);
